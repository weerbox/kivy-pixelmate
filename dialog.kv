#: import Image kivy.core.image
#: import BTN_HEIGHT globals

<OpenDialog>:
    chooser: file_chooser.__self__
    BoxLayout:
        orientation: "vertical"
        pos: root.pos

        BoxLayout:
            pos: root.pos
            orientation: "horizontal"

            FileChooserListView:
                id: file_chooser
                #path: root.def_path
                filters: root.filters
                #on_selection: image.source = self.selection and self.selection[0] or ''
                on_selection: image.texture = root.get_texture(self.selection[0])

            BoxLayout:
                #pos: root.pos
                orientation: "vertical"
                Image:
                    id: image
                    pos: root.pos
                    keep_ratio: True

                SettingSpacer:

                BoxLayout:
                    size_hint_y: 0.15
                    #height: 30
                    Button:
                        text: "Open"
                        #on_release: root.load(file_chooser.path, file_chooser.selection)
                        on_release: root.load(file_chooser.path, file_chooser.selection)
                    Button:
                        text: "Cancel"
                        on_release: root.cancel()

    SettingSpacer:



<SaveDialog>:
    chooser: file_chooser.__self__
    text_input: text_input
    spinner: spin.__self__


    BoxLayout:
        size: root.size
        #size_hint_x: 0.8
        pos: root.pos
        orientation: "vertical"

        SettingSpacer:

        BoxLayout:
            size_hint_y: 0.15
            #pos: root.pos
            orientation: "horizontal"

            TextInput:
                id: text_input
                size_hint_x: 0.8
                #height: 30
                multiline: False

            Spinner:
                id: spin
                size_hint_x: 0.20
                text: root.formats[0]
                values: root.formats
        SettingSpacer:

        BoxLayout:
            #size_hint_y: 0.15
            pos: root.pos
            orientation: "horizontal"


            FileChooserListView:
                id: file_chooser
                #size_hint_y: 0.5
                filters: root.filters
                on_selection: text_input.text = self.selection and self.selection[0] or ''



        SettingSpacer:

        BoxLayout:
            size_hint_y: 0.15
            #height: 30
            Button:
                text: "Save"
                on_release: root.save(file_chooser.path, text_input.text)
            Button:
                text: "Cancel"
                on_release: root.cancel()


<NewDialog>:
    input_width: input_w.__self__
    input_height: input_h.__self__
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"

        SettingSpacer:

        BoxLayout:
            size: root.size
            pos: root.pos
            #pos_hint: {'center_x':.5, 'center_y':.5}
            orientation: "horizontal"


            BoxLayout:
                #size_hint: 0.8, 0.8
                #pos_hint: {'center_x':.5, 'center_y':.5}
                orientation: "vertical"
                NumInput:
                    id: input_w
                    pos_hint: {'center_x':.5, 'center_y':.5}
                    hint_text: 'width'
                    multiline: False

            BoxLayout:
                #size_hint: 0.8, 0.8
                #pos_hint: {'center_x':.5, 'center_y':.5}
                orientation: "vertical"
                NumInput:
                    id: input_h
                    pos_hint: {'center_x':.5, 'center_y':.5}
                    hint_text: 'height'
                    #size_hint_y: 0.6
                    multiline: False

        SettingSpacer:

        BoxLayout:
            size__y: BTN_HEIGHT
            #size_hint_x: 0.75
            #spacing: root.size[0]/8
            pos_hint: {'center_x':.5, 'center_y':.5}
            Button:
                #pos_hint: {'center_y':.5}
                #size_hint_y:  0.5
                text: "Ok"
                on_release: root.ok(input_w.text, input_h.text)
            Button:
                #pos_hint: {'center_y':.5}
                #size_hint_y:  0.5
                text: "Cancel"
                on_release: root.cancel()